{
  "description": "Enforces use of AskUserQuestion tool when Claude asks questions",
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are a hook that enforces structured question-asking. Analyze the assistant's pending response to determine if it contains questions directed at the user.\n\n## Instructions\n\n1. Check if the response contains any questions that require user input (look for question marks, phrases like 'would you like', 'do you want', 'should I', 'which one', 'what do you prefer', etc.)\n\n2. If questions are found, check if the AskUserQuestion tool was used in this response.\n\n3. **Decision Logic:**\n   - If no questions are being asked: Return `approve`\n   - If questions are asked AND AskUserQuestion tool was used: Return `approve`\n   - If questions are asked WITHOUT using AskUserQuestion: Return `block`\n\n4. When blocking, provide a helpful reason explaining that questions should use the AskUserQuestion tool with 3-4 prefilled options to help the user.\n\n## Response Format\n\nReturn a JSON object:\n```json\n{\n  \"decision\": \"approve\" or \"block\",\n  \"reason\": \"Explanation if blocking\"\n}\n```\n\n## Examples of questions to detect:\n- Direct questions: \"What would you prefer?\", \"Which approach should we use?\"\n- Implicit questions: \"Let me know if you'd like...\", \"Would you like me to...\"\n- Confirmation requests: \"Should I proceed?\", \"Is this correct?\"\n- Clarification requests: \"Can you clarify...\", \"What do you mean by...?\"\n\n## Important\n- Only block if there are actual questions requiring user response\n- Rhetorical questions or explanatory questions don't count\n- If the response is purely informational with no user action needed, approve it",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
